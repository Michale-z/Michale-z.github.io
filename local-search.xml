<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Ubuntu 重装系统</title>
    <link href="/2024/12/20/reinstallation/"/>
    <url>/2024/12/20/reinstallation/</url>
    
    <content type="html"><![CDATA[<h2 id="显卡驱动"><a href="#显卡驱动" class="headerlink" title="显卡驱动"></a>显卡驱动</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">ubuntu-drivers devices <span class="hljs-comment"># 查看显卡驱动</span><br><span class="hljs-built_in">sudo</span> apt install nvidia-driver-xxx <span class="hljs-comment"># 安装驱动  eg: sudo apt install nvidia-driver-525</span><br>reboot <br><span class="hljs-built_in">sudo</span> apt update &amp;&amp; <span class="hljs-built_in">sudo</span> apt upgrade <span class="hljs-comment"># 更新软件</span><br>nvidia-smi  <span class="hljs-comment"># 查看显卡状态</span><br></code></pre></td></tr></table></figure><h2 id="CUDA"><a href="#CUDA" class="headerlink" title="CUDA"></a>CUDA</h2><ul><li>查看GPU支持的最高CUDA版本<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">nvidia-smi</span><br></code></pre></td></tr></table></figure></li><li>查看gcc版本<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs applescript">gcc <span class="hljs-comment">--version </span><br>sudo apt-<span class="hljs-keyword">get</span> install gcc<span class="hljs-number">-9</span> <span class="hljs-comment"># 如果没有的话，g++ 同理。</span><br></code></pre></td></tr></table></figure></li><li>前往 Nvidia 的CUDA官网：<a href="https://developer.nvidia.com/cuda-toolkit-archive">CUDA Toolkit Archive</a>，下载对应版本的CUDA Toolkit。<br><img src="/img/Linux/cuda-toolkit.png"><br>如下图选择：<br><img src="/img/Linux/cuda-toolkit-des.png"></li><li>进入到cuda-toolkit的解压目录，执行：<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sudo</span> sh cuda_11.<span class="hljs-number">2</span>.<span class="hljs-number">0</span>_460.<span class="hljs-number">89</span>_linux.run<br></code></pre></td></tr></table></figure></li><li>在选择CUDA Installer时，除了Driver外，勾选所有其他的组件。</li><li>接下来配置环境变量，输入一下命令：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vim ~/.bashrc  <span class="hljs-comment"># 首先得有vim编辑器，没有的话， sudo apt install vim</span><br></code></pre></td></tr></table></figure>在文末添加：<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">export</span> <span class="hljs-attribute">PATH</span>=/usr/local/cuda-11.2/bin$&#123;PATH:+:<span class="hljs-variable">$&#123;PATH&#125;</span>&#125;<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">LD_LIBRARY_PATH</span>=/usr/local/cuda-11.2/lib64$&#123;LD_LIBRARY_PATH:+:<span class="hljs-variable">$&#123;LD_LIBRARY_PATH&#125;</span>&#125;<br><span class="hljs-built_in">export</span> <span class="hljs-attribute">CUDA_HOME</span>=/usr/local/cuda-11.2<br></code></pre></td></tr></table></figure></li><li>更新系统环境：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure></li><li>验证CUDA是否安装成功：<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">nvcc -v</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="cuDNN"><a href="#cuDNN" class="headerlink" title="cuDNN"></a>cuDNN</h2><ul><li>检查是否安装了cuDNN<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">ldconfig <span class="hljs-punctuation">-</span>p <span class="hljs-string">| grep cudn</span><br></code></pre></td></tr></table></figure>如果没有输出结果，则需要安装</li><li>根据CUDA版本，在<a href="https://developer.nvidia.com/rdp/cudnn-archive#a-collapse805-111">官网下载</a>对应的cuDNN。</li><li>对刚刚下载的压缩包进行解压，命令为：<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sudo</span> tar -xzvf cudnn-<span class="hljs-number">11</span>.<span class="hljs-number">2</span>-linux-x64-v<span class="hljs-number">8.2.0.53</span>.tgz<br></code></pre></td></tr></table></figure></li><li>将解压后的文件夹中的文件复制到CUDA安装目录下：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">cp</span> cuda/lib64/* /usr/local/cuda-11.2/lib64/<br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">cp</span> cuda/include/* /usr/local/cuda-11.2/include/<br></code></pre></td></tr></table></figure></li></ul><h2 id="Conda-环境"><a href="#Conda-环境" class="headerlink" title="Conda 环境"></a>Conda 环境</h2><ul><li>下载文件，如果下载很慢，可以本地下载之后传到服务器上：<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span> https://repo.anaconda.com/archive/Anaconda3-<span class="hljs-number">2021</span>.<span class="hljs-number">05</span>-Linux-x86_64.sh<br></code></pre></td></tr></table></figure></li><li>安装anaconda：<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">bash</span> Anaconda3-<span class="hljs-number">2021</span>.<span class="hljs-number">05</span>-Linux-x86_64.sh<br></code></pre></td></tr></table></figure>最后安装快结束的时候可以自行选择安装路径，默认安装到&#x2F;home&#x2F;username&#x2F;anaconda3&#x2F;</li><li>修改 .bahsrc<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim ~/.bashrc<br></code></pre></td></tr></table></figure>在文末添加：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> PATH=/home/username/anaconda3/bin:<span class="hljs-variable">$PATH</span><br></code></pre></td></tr></table></figure>之后执行：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure></li></ul><h2 id="其他工具"><a href="#其他工具" class="headerlink" title="其他工具"></a>其他工具</h2><h4 id="nvtop"><a href="#nvtop" class="headerlink" title="nvtop"></a>nvtop</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install nvtop<br></code></pre></td></tr></table></figure><h4 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">sudo apt-<span class="hljs-built_in">get</span> install vim<br></code></pre></td></tr></table></figure><h4 id="…"><a href="#…" class="headerlink" title="…"></a>…</h4>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ubuntu</tag>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
